package com.github.geekuniversity_java_215.cmsbackend.geodata.services;

import com.github.geekuniversity_java_215.cmsbackend.core.entities.Address;
import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;

import static org.junit.jupiter.api.Assertions.*;

@SpringBootTest
public class GeoServiceTest {
//    private String ROUTE_URL = "http://router.project-osrm.org/route/v1/";
//    private String CODE_URL = "https://nominatim.openstreetmap.org/search?q=100";
//    private String transport = "driving";
//    Address address = new Address("Санкт-Петербург", "Кондратьевский", 20, 0, 100);
//    String latFrom = "56.00222";
//    String lonFrom = "25.56776";
//    String latTo = "56.67222";
//    String lonTo = "25.99776";
//
//    @Test
//    public void getRoute() {
//        StringBuilder url = new StringBuilder();
//        url.append(ROUTE_URL).append(transport).append("/");
//        url.append(lonFrom).append(",").append(latFrom).append(";");
//        url.append(lonTo).append(",").append(latTo);
//        System.out.println(url);
//    }
//
//    @Test
//    public void decodeAddressToPoint() {
//        System.out.println(CODE_URL +address.addressFormatToRequest()+"&format=json");
//    }

//    @Disabled
//    @Test
//    public void getRoute() {
//        RestTemplate restTemplate = new RestTemplate();
//        ObjectMapper mapper = new ObjectMapper();
//        GeoService geoService = new GeoService();
//        Order order = new Order();
//
//        Address from = new Address("Санкт-Петербург", "Кондратьевский", 70, 2, 100);
//        Address to = new Address("Санкт-Петербург", "Кондратьевский", 20, 0, 100);
//
//        String fromPoint = restTemplate.getForObject(geoService.geocode(from), String.class);
//        String toPoint = restTemplate.getForObject(geoService.geocode(to), String.class);
//
//        String[] fromPoints = fromPoint.split("}");
//        String[] toPoints = toPoint.split("}");
//        String primaryPointFrom = fromPoints[0].substring(1) + "}";
//        String primaryPointTo = toPoints[0].substring(1) + "}";
//        JsonNode nodeFrom=null, nodeTo=null;
//        try {
//            nodeFrom = mapper.readTree(primaryPointFrom);
//            nodeTo = mapper.readTree(primaryPointTo);
//        } catch (IOException e) {
//            e.printStackTrace();
//        }
//
//        String latFrom = nodeFrom.get("lat").asText();
//        String lonFrom = nodeFrom.get("lon").asText();
//        String latTo = nodeTo.get("lat").asText();
//        String lonTo = nodeTo.get("lon").asText();
//
//        from.setLongitude(lonFrom);
//        from.setLatitude(latFrom);
//        to.setLongitude(lonTo);
//        to.setLatitude(latTo);
//
//        order.setFrom(from);
//        order.setTo(to);
//
//        String route = geoService.createRoute(order, Transport.driving);
//        System.out.println(restTemplate.getForObject(route, String.class));
//    }
}